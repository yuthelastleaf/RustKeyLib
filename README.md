# RustKeyLib

简单的一个用在rust项目中监控按键的库，现还是demo状态

# 使用方式

## 编译前准备

* C++编译器
* CMake
* rust编译器

## 编译内容

首先可以直接运行Lib/build.bat，生成动态库文件，然后去到rcdemo中直接运行命令cargo build即可直接编译。如果目录有修改，请到相关文件下修改，才能够保证正常编译。

rcdemo仅仅是演示使用的demo程序，主要注册了组件键ctrl + O键按下后的回调，然后打印相关消息。

## 代码中使用

编译的C++库提供了三个接口，其中rust中需要定义指定的回调函数即可使用，回调函数的定义位【extern"C"fn(c_ulonglong) ->c_ushort】，注意返回值当前没有实意，可任意返回常量即可。

| 接口名称          | 参数列表                                                       | 返回值                                 | 接口功能                                                                                          |
| ----------------- | -------------------------------------------------------------- | -------------------------------------- | ------------------------------------------------------------------------------------------------- |
| register_callback | rust回调函数                                                   | 无                                     | 注册回调，可在用户按下按键时，获得当前按键的组合标识，内部定义                                    |
| register_filter   | 过滤组合键，rust回调函数                                       | 无                                     | 注册过滤组合键的回调，根据注册的组合键，在按下对应组合键之后，运行指定的rust回调方法              |
| iskeyintag        | 回调函数返回的组合键ID，需要确认的按键码(在key_inter.rs中定义) | 布尔值，如果已经按下对应键值，返回true | 回调方法中的c_ulonglong值便是返回的当前按键的标识，可以通过这个方法进而判断是否有指定的按键被按下 |
